<app-skeleton *ngIf="(loaded$|async)" [type]="'card'"></app-skeleton>
<p-card *ngIf="!(loaded$|async)" header="User Register" class="p-fluid">
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="field">
      <label appLabel for="bloodType" label="Blood Type:"
             [required]="bloodTypeField"></label>
      <p-dropdown id="bloodType"
                  formControlName="bloodType"
                  dataKey="id"
                  [options]="bloodTypes"
                  optionLabel="name"
                  [filter]="true"
                  filterBy="name"
                  placeholder="Select">
        <ng-template pTemplate="item" let-item>
          {{item.name}}
        </ng-template>
      </p-dropdown>
      <small appErrorMessage
             [errors]="bloodTypeField.errors"
             [touched]="bloodTypeField.touched">
      </small>
    </div>
    <div class="formgrid grid">
      <div class="field xl:col-6 lg:col-6 md:col-6 sm:col-12">
        <label appLabel for="username" label="Username:"
               [required]="usernameField"></label>
        <input type="text" pInputText id="username" formControlName="username" pKeyFilter="alphanum"/>
        <small appErrorMessage
               [errors]="usernameField.errors"
               [touched]="usernameField.touched"
               [dirty]="usernameField.dirty">
        </small>
      </div>
      <div class="field xl:col-6 lg:col-6 md:col-6 sm:col-12">
        <label appLabel for="password" label="Password:"
               [required]="passwordField"></label>
        <input pPassword type="password" id="password" formControlName="password"/>
        <small appErrorMessage
               [errors]="passwordField.errors"
               [touched]="passwordField.touched"
               [dirty]="passwordField.dirty">
        </small>
      </div>
    </div>
    <div class="formgrid grid">
      <div class="field xl:col-6 lg:col-6 md:col-6 sm:col-12">
        {{nameField.valid}}
        <label appLabel for="name" label="Name:"
               [required]="nameField"></label>
        <input type="text" pInputText id="name" formControlName="name"/>
        <small appErrorMessage
               [errors]="nameField.errors"
               [touched]="nameField.touched"
               [dirty]="nameField.dirty">
        </small>
      </div>
      <div class="field xl:col-6 lg:col-6 md:col-6 sm:col-12">
        <label appLabel for="lastname" label="Lastname:"
               [required]="lastnameField"></label>
        <input type="text" pInputText id="lastname" formControlName="lastname"/>
        <small appErrorMessage
               [errors]="lastnameField.errors"
               [touched]="lastnameField.touched"
               [dirty]="lastnameField.dirty">
        </small>
      </div>
    </div>
    <div class="formgrid grid">
      <div class="field xl:col-6 lg:col-6 md:col-6 sm:col-12">
        <label appLabel for="birthdate" label="Birthdate:"
               [required]="birthdateField"></label>
        <p-calendar id="birthdate"
                    formControlName="birthdate"
                    dateFormat="yy-mm-dd"
                    [showIcon]="true"
                    [readonlyInput]="true"></p-calendar>
        <small appErrorMessage
               [errors]="birthdateField.errors"
               [touched]="birthdateField.touched"
               [dirty]="birthdateField.dirty">
        </small>
      </div>
      <div class="field xl:col-6 lg:col-6 md:col-6 sm:col-12">
        <label appLabel for="email" label="Email:"
               [required]="emailField"></label>
        <input type="text" pInputText id="email" formControlName="email"/>
        <small appErrorMessage
               [errors]="emailField.errors"
               [touched]="emailField.touched"
               [dirty]="emailField.dirty">
        </small>
      </div>
    </div>
    <div class="formgrid grid">
      <div class="field xl:col-6 lg:col-6 md:col-6 sm:col-12">
        <button pButton pRipple type="button"
                label="Cancel"
                class="p-button-info"
                icon="pi pi-arrow-left"
                [loading]="(loaded$|async)!"
                (click)="back()"></button>
      </div>
      <div class="field xl:col-6 lg:col-6 md:col-6 sm:col-12">
        <button pButton pRipple type="submit"
                label="Save"
                icon="pi pi-save"
                [loading]="(loaded$|async)!"></button>
      </div>
    </div>
    <div *ngIf="(loaded$|async)" class="field">
      <app-progress-bar></app-progress-bar>
    </div>
  </form>
</p-card>
