<app-skeleton 
  *ngIf="coreService.isLoading" 
  [type]="SkeletonEnum.CARD"
></app-skeleton>

<p-toolbar *ngIf="!coreService.isLoading">
  <div class="p-toolbar-group-left">
    <app-header-form [id]="id"></app-header-form>
  </div>
  <div class="p-toolbar-group-right">
    <button pButton pRipple type="button"
            (click)="back()"
            [icon]="IconButtonActionEnum.CANCEL"
            [label]="LabelButtonActionEnum.CANCEL"
            [loading]="coreService.isLoading"
            [ngClass]="[ClassButtonActionEnum.CANCEL]"></button>
    <p-divider layout="vertical"></p-divider>
    <button pButton pRipple type="button"
            (click)="onSubmit()"
            [icon]="IconButtonActionEnum.SAVE"
            [label]="LabelButtonActionEnum.SAVE"
            [loading]="coreService.isLoading"
            [ngClass]="[ClassButtonActionEnum.SAVE]"></button>
  </div>
</p-toolbar>

<p-panel *ngIf="!coreService.isLoading" class="p-fluid">
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="formgrid grid">
      <div class="field xl:col-6 lg:col-6 md:col-6 sm:col-12">
        <label 
          appLabel 
          for="number" 
          label="Numero de matricula:" 
          [required]="numberField"
        >
        </label>
        <input 
          pInputText 
          type="number" 
          id="number" 
          formControlName="number" 
        />
      </div>
      <div class="field xl:col-6 lg:col-6 md:col-6 sm:col-12">
        <label 
          appLabel 
          for="date" 
          label="Fecha de Matrícula:" 
          [required]="dateField"
          >
        </label>
        <p-calendar 
          id="date"
          formControlName="date"
          dateFormat="yy-mm-dd"
          [showIcon]="true"
          >
        </p-calendar>
        <small 
          appErrorMessage
          [errors]="dateField.errors"
          [touched]="dateField.touched"
          [dirty]="dateField.dirty"
          >
        </small>
      </div>
    </div>
    <div class="formgrid grid">
      <div class="field xl:col-6 lg:col-6 md:col-6 sm:col-12">
        <label 
          appLabel 
          for="academicObservation" 
          label="Observacion academica:" 
          [required]="academicObservationField"
        >
        </label>
        <input 
          pInputText 
          type="text" 
          id="academicObservation" 
          formControlName="academicObservation"
        />
      </div>
      <div class="field xl:col-6 lg:col-6 md:col-6 sm:col-12">
        <label 
          appLabel 
          for="finalAttendance" 
          label="Valor de la asistencia:" 
          [required]="finalAttendanceField"
        >
        </label>
        <input 
          pInputText 
          type="text" 
          id="finalAttendance" 
          formControlName="finalAttendance"
        />
      </div>
    </div>
    <div class="formgrid grid">
      <div class="field xl:col-4 lg:col-4 md:col-4 sm:col-12">
        <label 
          appLabel 
          for="academicPeriod" 
          label="Periodo Acádemico:" 
          [required]="academicPeriodField"
        ></label>
        <p-dropdown 
          id="academicPeriod" 
          dataKey="id"
          formControlName="academicPeriod" 
          [options]="academicPeriods"
          optionLabel="name" 
          placeholder="Seleccione"
        >
        </p-dropdown>
        <small 
          appErrorMessage 
          [errors]="academicPeriodField.errors" 
          [touched]="academicPeriodField.touched"
          [dirty]="academicPeriodField.dirty">
        </small>
      </div>
      <div class="field xl:col-4 lg:col-4 md:col-4 sm:col-12">
        <label 
          appLabel 
          for="workday" 
          label="Jornada:" 
          [required]="workdayField"
        >
        </label>
        <p-dropdown 
          id="workday" 
          formControlName="workday" 
          dataKey="id" 
          [options]="workdays"
          optionLabel="name" 
          placeholder="Seleccione"
        >
        </p-dropdown>
        <small 
          appErrorMessage 
          [errors]="workdayField.errors" 
          [touched]="workdayField.touched"
          [dirty]="workdayField.dirty"
        >
        </small>
        </div>
        <div class="field xl:col-4 lg:col-4 md:col-4 sm:col-12">
          <label 
            appLabel 
            for="parallel" 
            label="Paralelo:" 
            [required]="parallelField"
          >
          </label>
          <p-dropdown 
            id="parallel" 
            formControlName="parallel" 
            dataKey="id" 
            [options]="parallels"
            optionLabel="name"
            placeholder="Seleccione"
          >
          </p-dropdown>
          <small 
            appErrorMessage 
            [errors]="parallelField.errors" 
            [touched]="parallelField.touched"
            [dirty]="parallelField.dirty"
          >
          </small>
          </div>
    </div>     
    <div class="formgrid grid">
      <div class="field xl:col-12 lg:col-12 md:col-12 sm:col-12">
        <label 
          appLabel 
          for="observation" 
          label="Observación de la Matrícula:" 
          [required]="observationField"
        >
        </label>
        <input 
          pInputText 
          type="text" 
          id="observation" 
          formControlName="observation"
        />
      </div>
    </div>
  </form>
</p-panel>
